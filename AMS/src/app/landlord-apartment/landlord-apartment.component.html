<div class="landlord-dashboard">
  <!-- Assign Tenant Section -->
  <div class="assign-tenant-form-wrapper">
    <h2>Manage Apartment Assignments</h2>
    <form class="assign-tenant-form" (ngSubmit)="assignTenantToApartment()">
      <!-- Select Apartment -->
      <div class="form-group">
        <label for="apartment">Select Apartment</label>
        <select
          id="apartment"
          required
          class="form-control"
          [(ngModel)]="selectedApartmentId"
          name="apartment"
        >
          <option *ngFor="let apartment of apartments" [value]="apartment.apartment_id">
            {{ apartment.room }} ({{ apartment.description }})
          </option>
        </select>
      </div>

      <!-- Select Tenant -->
      <div class="form-group">
        <label for="tenant">Select Tenant</label>
        <select
          id="tenant"
          required
          class="form-control"
          [(ngModel)]="selectedTenantId"
          name="tenant"
        >
          <option *ngFor="let tenant of tenants" [value]="tenant.tenant_id">
            {{ tenant.tenant_fullname }}
          </option>
        </select>
      </div>

      <!-- Action Buttons -->
      <div class="form-group">
        <button
          type="button"
          class="btn btn-primary"
          (click)="updateApartmentAndTenant('assign_tenant')"
        >
          Assign Tenant
        </button>
        <button
          type="button"
          class="btn btn-warning"
          (click)="updateApartmentAndTenant('remove_tenant')"
        >
          Remove Tenant
        </button>
      </div>
    </form>
  </div>

  <!-- Displaying Apartments -->
  <div class="apartments-list">
    <h2>Apartment List</h2>
    <div *ngIf="apartments && apartments.length; else noApartments">
      <div *ngFor="let apartment of apartments" class="apartment-item">
        <h3>{{ apartment.room }}</h3>
        <p>Rent: ${{ apartment.rent }}</p>
        <p>{{ apartment.description }}</p>
        <p>
          <strong>Status:</strong>
          {{ apartment.tenant_id ? 'Occupied' : 'Available' }}
        </p>
      </div>
    </div>
    <ng-template #noApartments>
      <p>No apartments available.</p>
    </ng-template>
  </div>

  <!-- Displaying Tenants -->
  <div class="tenants-list">
    <h2>Tenant List</h2>
    <div *ngIf="tenants && tenants.length; else noTenants">
      <ul>
        <li *ngFor="let tenant of tenants">
          <strong>{{ tenant.tenant_fullname }}</strong>
          <br />
          <em>Email:</em> {{ tenant.tenant_email }}
          <br />
          <em>Tenant ID:</em> {{ tenant.tenant_id }}
          <br />
          <em>Room:</em>
          {{ tenant.room ? tenant.room : 'Not Assigned' }}
        </li>
      </ul>
    </div>
    <ng-template #noTenants>
      <p>No tenants found.</p>
    </ng-template>
  </div>

  <!-- Create Post Section -->
  <div class="create-post-form-wrapper">
    <h2>Create a New Post</h2>
    <form class="create-post-form" (ngSubmit)="createPost()">
      <!-- Post Title -->
      <div class="form-group">
        <input
          type="text"
          id="posttitle"
          required
          class="form-control"
          placeholder="Enter Post Title"
          name="posttitle"
          [(ngModel)]="title"
          #titleInput="ngModel"
        />
        <div *ngIf="titleInput.invalid && titleInput.touched" class="error-message">
          Title is required.
        </div>
      </div>

      <!-- Post Content -->
      <div class="form-group">
        <textarea
          id="postcontent"
          required
          class="form-control"
          placeholder="Enter Post Content"
          name="postcontent"
          [(ngModel)]="content"
          #contentInput="ngModel"
        ></textarea>
        <div *ngIf="contentInput.invalid && contentInput.touched" class="error-message">
          Content is required.
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-group">
        <button
          class="btn btn-primary"
          type="submit"
          [disabled]="titleInput.invalid || contentInput.invalid"
        >
          Create Post
        </button>
      </div>
    </form>
  </div>

  <!-- Create Apartment Section -->
  <div class="create-apartment-form-wrapper">
    <h2>Create a New Apartment</h2>
    <form (ngSubmit)="createApartment()">
      <!-- Apartment Room -->
      <div class="form-group">
        <input
          type="text"
          id="room"
          required
          class="form-control"
          placeholder="Apartment Room"
          [(ngModel)]="room"
          name="room"
          #roomInput="ngModel"
        />
        <div *ngIf="roomInput.invalid && roomInput.touched" class="error-message">
          Room is required.
        </div>
      </div>

      <!-- Rent Amount -->
      <div class="form-group">
        <input
          type="number"
          id="rent"
          required
          class="form-control"
          placeholder="Rent Amount"
          [(ngModel)]="rent"
          name="rent"
          #rentInput="ngModel"
        />
        <div *ngIf="rentInput.invalid && rentInput.touched" class="error-message">
          Rent is required.
        </div>
      </div>

      <!-- Apartment Description -->
      <div class="form-group">
        <textarea
          id="description"
          required
          class="form-control"
          placeholder="Apartment Description"
          [(ngModel)]="description"
          name="description"
          #descriptionInput="ngModel"
        ></textarea>
        <div *ngIf="descriptionInput.invalid && descriptionInput.touched" class="error-message">
          Description is required.
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-group">
        <button
          class="btn btn-primary"
          type="submit"
          [disabled]="roomInput.invalid || rentInput.invalid || descriptionInput.invalid"
        >
          Create Apartment
        </button>
      </div>
    </form>
  </div>

  

  <!-- Display Posts -->
  <div *ngIf="posts && posts.length" class="posts-list">
    <h2>Posts</h2>
    <div *ngFor="let post of posts">
      <h3>{{ post.title }}</h3>
      <p>{{ post.content }}</p>
    </div>
  </div>
</div>
